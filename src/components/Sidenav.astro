---
import { categoryInfo, emoticons, type Category } from "../data/emoticons";

interface Props {
  groupedEmoticons: {
    category: Category;
    emoticons: typeof emoticons;
  }[];
}

const { groupedEmoticons } = Astro.props;
---

<div class="wrapper">
  <nav class="side-nav" aria-label="Category navigation">
    <div class="header">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        ><path
          d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"
        ></path><path d="M20 3v4"></path><path d="M22 5h-4"></path><path
          d="M4 17v2"></path><path d="M5 18H3"></path></svg
      >
      <span>Categories</span>
    </div>
    <p>Jump to section</p>
    <ul class="nav-list">
      {
        groupedEmoticons.map(({ category, emoticons: catEmoticons }) => (
          <li>
            <a href={`#${category}`} class="nav-link">
              <span class="nav-icon">{categoryInfo[category].navIcon}</span>
              <span class="nav-label">{categoryInfo[category].label}</span>
              <span class="nav-count">{catEmoticons.length}</span>
            </a>
          </li>
        ))
      }
    </ul>
  </nav>
</div>

<style>
  .wrapper {
    background-color: rgb(248, 242, 245);
  }
  .side-nav {
    position: sticky;
    top: 0;
    width: 250px;
    padding: 1rem;
  }

  .header {
    border-bottom: 1px solid rgba(234, 215, 224, 0.5);
  }

  .nav-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .nav-link {
    display: flex;
    padding: 8px;
    gap: 0.75rem;
    border-radius: 16px;
    transition:
      background-color 0.2s ease,
      color 0.2s ease;
  }

  .nav-link:hover,
  .nav-link.is-active {
    background-color: hsl(332, 31%, 88%);
    font-weight: 500;
  }

  .nav-link:active {
    background-color: hsl(280, 60%, 90%)
;
  }

  .nav-count {
    margin-left: auto;
  }
</style>
