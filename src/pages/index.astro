---
import Layout from "../layouts/Layout.astro";
import { emoticons } from "../data/emoticons";
import EmoticonCard from "../components/EmoticonCard.astro";
---

<Layout>
  <main>
    {
      emoticons.map((emoticon) => (
        <EmoticonCard emoticon={emoticon} />
      ))
    }
  </main>
</Layout>

<script is:inline>
  const COPY_DURATION = 1500;

  function copyFromCard(card) {
    const text = card.dataset.emoticon;
    if (!text) return;

    navigator.clipboard.writeText(text);

    card.dataset.copied = 'true';

    setTimeout(() => {
      card.dataset.copied = 'false';
    }, COPY_DURATION);
  }

  document.addEventListener('click', (e) => {
    const card = e.target.closest('.card');
    if (!card) return;

    copyFromCard(card);
  });

  document.addEventListener('keydown', (e) => {
    if (e.key !== 'Enter' && e.key !== ' ') return;

    const card = e.target.closest('.card');
    if (!card) return;

    e.preventDefault();
    copyFromCard(card);
  });
</script>


<style>
  main {
    display: grid;
    gap: 16px;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
	max-width: 1180px;
	padding: 32px;
	margin-left: auto;
	margin-right: auto;
  }
</style>
